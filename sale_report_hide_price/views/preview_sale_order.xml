<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <template id="preview_sale_sale_orderdocument" inherit_id="sale.sale_order_portal_content">
        <td t-if="display_discount" position="replace">
            <t t-if="sale_order.show_discount">
                <td t-if="display_discount" class="text-right" groups="product.group_discount_per_so_line">
                    <span t-field="line.discount" />
                </td>
            </t>
            <t t-if="not sale_order.show_discount">
                <td t-if="display_discount" class="text-right" groups="product.group_discount_per_so_line">-N.A.-</td>
            </t>
        </td>
        <xpath expr="//table[@id='sales_order_table']/tbody/t[2]/tr/t/td[3]" position="replace">
            <t t-if="sale_order.show_price">
                <td t-attf-class="text-right {{ 'd-none d-sm-table-cell' if report_type == 'html' else '' }}">
                    <div t-field="line.price_unit"/>
                </td>
            </t>
            <t t-if="not sale_order.show_price">
                <td class="text-right">-N.A.-</td>
            </t>
        </xpath>
        <xpath expr="//table[@id='sales_order_table']/tbody/t[2]/tr/t/td[hasclass('text-right')][2]" position="replace">
            <t t-if="sale_order.show_price">
                <td class="text-right">
                    <span class="oe_order_line_price_subtotal" t-field="line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                    <span class="oe_order_line_price_total" t-field="line.price_total" groups="account.group_show_line_subtotals_tax_included"/>
                </td>
            </t>
            <t t-if="not sale_order.show_price">
                <td class="text-right" groups="account.group_show_line_subtotals_tax_excluded">-N.A.-</td>
            </t>
        </xpath>
        <xpath expr="//div[@name='total']" position="replace">
            <div t-attf-class="#{'col-4' if report_type != 'html' else 'col-sm-7 col-md-5'} ml-auto">
                <t t-if="sale_order.show_price">

                    <t t-call="sale.sale_order_portal_content_totals_table"/>
                </t>
                <t t-if="not sale_order.show_price">

                    <td class="text-right">-N.A.-</td>
                </t>
            </div>
        </xpath>
  </template>
  <template id="sale.sale_order_portal_content_totals_table">
        <table class="table table-sm">
            <t t-if="sale_order.show_price">
                <t t-set="tax_totals" t-value="json.loads(sale_order.tax_totals_json)"/>
            </t>
            <t t-call="account.document_tax_totals"/>

        </table>
 </template>
</odoo>
