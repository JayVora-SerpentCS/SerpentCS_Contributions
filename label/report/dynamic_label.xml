<openerp>
  <data>
    <template id="report_label">
      <t t-call="report.html_container">
	<t t-foreach="docs" t-as="o">
	  <div class="page" style="margin-top:o.env.context['top_margin'];margin-left:o.env.context['left_margin'];margin-right:o.env.context['right_margin'];margin-bottom:o.env.context['bottom_margin'];">
	    <table t-att-style="'border-spacing:'+o.env.context['cell_spacing']+';border-collapse: separate'">
	      <t t-foreach="get_data(o.env.context['rows'], o.env.context['columns'], o.env.context['ids'], o.env.context['model'], o.env.context['number_of_labels'])" t-as="row">
		<tr t-att-height="o.env.context['height']">
		  <t t-foreach="row" t-as="col">
		    <td t-att-width="o.env.context['width']" t-att-style="'padding-left:'+o.env.context['padding_left']+';padding-right:'+o.env.context['padding_right']+';padding-top:'+o.env.context['padding_top']+';padding-bottom:'+o.env.context['padding_bottom']+';border:1px solid black;'">
		      <t t-foreach="col" t-as="val">
			<t t-if="val['newline']">
			  <br/>
			</t>
			
			<span style="val['style']">
			  <t t-if="(val.get('type') == 'normal')">
			    <t t-esc="val['string']"/>
			    <t t-esc="val['value']"/>
			  </t>
			  
			    <t t-if="(val.get('type') == 'image')">
			      <t t-esc="val.get('string')"/>
			      <img t-att-src="'data:image/png;base64,%s' % (val.get('value'))" t-att-style="'height:'+o.env.context['image_height']+';width:'+o.env.context['image_width']" />
			    </t>
			    
			    <t t-if="(val.get('type') == 'barcode')">
			      <t t-esc="val.get('string')"/>
			      <img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('EAN13',val.get('value') , o.env.context['barcode_width'], o.env.context['barcode_height'])"></img>
			    </t>
			</span>
		      </t>
		    </td>
		  </t>
		</tr>
	      </t>
	    </table>
	  </div>
	</t>
      </t>
    </template>
  </data>
</openerp>
